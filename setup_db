

create database meetnwork_db;		

\c database meetnwork_db;		/* connect to database */

CREATE TABLE IF NOT EXISTS login_table (
  user_name VARCHAR(30) PRIMARY KEY,
  user_email VARCHAR(100) NOT NULL,
  user_password VARCHAR(30) NOT NULL
);

CREATE TABLE IF NOT EXISTS class_table(
  class_id SERIAL PRIMARY KEY,
  class_name VARCHAR(100) NOT NULL,
  professor_name VARCHAR(100) NOT NULL,
  enrolled_students INT[]
);

/* year is grade level freshman, sophomore, junior OR senior */
/* status indicates whether a user is online or not */
/* user name is foriegn key off login_table */

CREATE TABLE IF NOT EXISTS user_table (
	user_id SERIAL PRIMARY KEY,
	first_name VARCHAR(30) NOT NULL,
	last_name VARCHAR (40) NOT NULL,
	major VARCHAR(40) NOT NULL,
	year VARCHAR(15) NOT NULL,
	classes INT[],
	status BOOLEAN NOT NULL,
	user_name VARCHAR(30)
);

INSERT INTO class_table(class_name, professor_name, enrolled_students)
VALUES ('Software Development', 'Alan Paradise', ARRAY[]::integer[]),
('Linear Algebra', 'Rebecca Morrison', ARRAY[]::integer[]),
('Critical Thinking', 'Garrett Bredeson', ARRAY[]::integer[]);

CREATE TABLE IF NOT EXISTS user_todos (
	user_id SERIAL PRIMARY KEY,
	classes INT[],
	todos VARCHAR[]
);

INSERT INTO user_todos VALUES 
(11, ARRAY[1,2], ARRAY['homework 3', 'problem set 2']),
(12, ARRAY[2,3], ARRAY['homework 3 and 4', 'problem set 5']),
(13, ARRAY[1,3], ARRAY['homework 4', 'problem set 5 number 6']);

INSERT INTO user_table VALUES
(11, 'Elizabeth', 'Robinson', 'CSCI', 3, ARRAY[1,2,3], CAST(1 AS BOOL), 'elro2540'),
(12, 'Brad', 'Pitt', 'CSCI', 3, ARRAY[2,3], CAST(1 AS BOOL), 'brbi2540'),
(13, 'Jennifer', 'Lopez', 'CSCI', 2, ARRAY[1,2,3], CAST(1 AS BOOL), 'jelo2540');

INSERT INTO login_table VALUES ('elro2540', 'elro2540@colorado.edu', 'password');

	
ALTER TABLE user_todos
ADD COLUMN location VARCHAR(30),
ADD COLUMN location_desc VARCHAR(60);



UPDATE user_todos
SET location = 'Engineering Center' WHERE user_id = 12;

UPDATE user_todos 
SET location_desc = 'Main room in Bold Center' WHERE user_id = 12;

UPDATE user_todos
SET location = 'Engineering Center' WHERE user_id = 13;

UPDATE user_todos
SET location_desc = 'In small CSEL room.' WHERE user_id = 13;

ALTER TABLE user_todos
ALTER COLUMN location SET NOT NULL,
ALTER COLUMN location_desc SET NOT NULL;

INSERT INTO class_table(class_name, professor_name, enrolled_students)
VALUES ('Heat Transfer', 'The Cookie Monster', ARRAY[]::integer[]);